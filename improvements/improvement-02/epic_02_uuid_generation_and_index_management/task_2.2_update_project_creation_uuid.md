# Task 2.2: Update Project Creation Logic with UUIDs

**Parent Epic:** Epic 2: UUID Integration and Entity ID Management
**Status:** To Do

---

## 1. Objective & Scope

The objective of this task is to ensure that when a new `Project` entity is created, its `id` field is populated with a version 4 UUID generated by the `_generateUUID()` utility (created in Task 2.1).

**Scope:**

- Modify the `TaskManager.createProject()` method (which will be implemented/refactored as part of Epic 6, Task 6.1). If this method doesn't exist yet, this task might need to create a placeholder or anticipate its structure based on `create_project` tool definition in `improvement-02.md`.
- Ensure the `id` field of the new `Project` object is assigned the result of `this._generateUUID()`.

## 2. Technical Purpose

To apply the new UUID generation standard to `Project` entities, ensuring they have unique, standardized identifiers from the moment of their creation.

## 3. Contextual Relevance

This is the first step in applying UUIDs to concrete entity creation logic. `Project` entities are a new top-level primitive, and their correct identification is crucial for the new architecture.

## 4. Semantic Meaning

Assigning UUIDs to Projects at creation time reinforces their status as uniquely identifiable entities within the system, independent of any prefixed or sequential ID schemes used previously.

## 5. Detailed Implementation Guidance

1.  **Locate/Anticipate `TaskManager.createProject()`:**

    - This method will be responsible for creating new `Project` objects. It will likely take parameters such as `title` and `owner` (as per `create_project` tool schema in `improvement-02.md`).
    - It should also handle assigning an `index` (covered in Epic 3).
    - If this method is being created fresh as part of Epic 6, this task focuses _only_ on the ID assignment part. If it's refactoring an existing method (e.g., adapting an old `createPRD`), ensure the ID logic is updated.

2.  **Integrate `_generateUUID()`:**

    - When constructing the new `Project` object within `createProject()`, assign its `id` property:
      ```typescript
      const newProject: Project = {
        id: this._generateUUID(), // Use the new utility
        title: projectTitle, // from parameters
        owner: projectOwner, // from parameters
        index: await this.getNextIndex("project"), // Anticipates Epic 3 logic
        // ... any other fields if applicable, though Project interface is simple
      };
      ```

3.  **Data Persistence:**

    - The `createProject()` method will add this `newProject` to the `projects` array in the in-memory `ProjectData` object and then call `this.saveData()`.

4.  **Return Value:** The method should return the newly created `Project` object.

5.  **Consider Current `createPRD` (if refactoring):**
    - The current `TaskManager` has a `createPRD(title: string, description: string, owner: string): Promise<PRD>` method.
    - When this is refactored into `createProject(title: string, owner: string): Promise<Project>`, the `description` parameter will be removed (as Documents handle this), and the ID generation part using the old `generateId('prd')` must be replaced with `this._generateUUID()`.
    - The `status` field from the old PRD (`'draft'`) and timestamps (`created_at`, `updated_at`) are not present in the new `Project` interface as per `improvement-02.md` and should be omitted.

## 6. Acceptance Criteria

- The `TaskManager.createProject()` method (or its equivalent if refactoring an existing one like `createPRD`) correctly uses `this._generateUUID()` to assign the `id` for new `Project` entities.
- The generated ID is a valid UUID string.
- The new `Project` object, including its UUID, is correctly added to the `ProjectData.projects` array and persisted.
- The method returns the created `Project` object with its UUID.
- If refactoring `createPRD`, the old ID generation is removed, and obsolete fields (description, status, timestamps for Project entity itself) are no longer set.
- The code is clean, well-formatted, and type-safe.
- Commit message clearly describes the changes (e.g., `feat(TaskManager): Assign UUIDs to new Projects`).
